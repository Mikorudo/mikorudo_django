{% extends 'base.html' %}
{% load activities_tags %}
{% load static %}

{% block breadcrumbs %}
 {% if perms.activities.change_activity %}
    <a href="{% url 'edit_activity_by_slug' activity.slug %}" class="btn btn-primary">Изменить</a>
  {% endif %}
  {% if perms.activities.delete_activity %}
    <a href="{% url 'delete_activity_by_slug' activity.slug %}" class="btn btn-danger" onclick="return confirm('Вы уверены, что хотите удалить это мероприятие?');">Удалить</a>
  {% endif %}
{% endblock %}

{% block content %}
{% get_upcoming_activities 10 %}

<article>
  <h2><strong>{{ activity.title }} | автор: {{ activity.author.last_name|default:"неизвестен" }}</strong></h2>
  <p><em>Описание: {{ activity.description }}</em></p>
  <p>Дата: {{ activity.date }}</p>
  <p>Время: {{ activity.time }}</p>
  <p>Категория: {{ activity.category }}</p>
  <p>Длительность: {{ activity.duration }}</p>
  <p>Контакт для связи: {{ activity.contact }}</p>
</article>

<div class="navigation-buttons">
  {% with prev_activity=activity.get_previous_by_date next_activity=activity.get_next_by_date %}
    {% if prev_activity %}
      <a href="{{ prev_activity.get_absolute_url }}" class="nav-button">Предыдущее мероприятие</a>
    {% endif %}
    {% if next_activity %}
      <a href="{{ next_activity.get_absolute_url }}" class="nav-button">Следующее мероприятие</a>
    {% endif %}
  {% endwith %}
</div>
{% endblock %}

